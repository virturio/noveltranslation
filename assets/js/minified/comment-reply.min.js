window.addComment=function(window){let document=window.document;let config={commentReplyClass:"comment-reply-link",cancelReplyId:"cancel-comment-reply-link",commentFormId:"commentform",commentFormAuthorFieldId:"author",commentFormEmailFieldId:"email",commentFieldId:"comment-field",temporaryFormId:"wp-temp-form-div",parentIdFieldId:"comment_parent",postIdFieldId:"comment_post_ID",cookiesConsentId:"wp-comment-cookies-consent",commentFormAuthorFieldsId:"comment-form-author-fields"};let cutsTheMustard="querySelector"in document&&"addEventListener"in window;let supportsDataset=!!document.documentElement.dataset;let cancelElement;let commentFormElement;let commentFieldElement;let respondElement;let cookiesConsentElement;if(cutsTheMustard&&document.readyState!=="loading"){init()}else if(cutsTheMustard){window.addEventListener("DOMContentLoaded",init,false)}function init(context){if(!cutsTheMustard){return}cancelElement=getElementById(config.cancelReplyId);commentFormElement=getElementById(config.commentFormId);commentFieldElement=getElementById(config.commentFieldId);cookiesConsentElement=getElementById(config.cookiesConsentId);if(!cancelElement){return}cancelElement.addEventListener("touchstart",cancelEvent);cancelElement.addEventListener("click",cancelEvent);onInitFunction();let links=replyLinks(context);let element;for(let i=0,l=links.length;i<l;i++){element=links[i];element.addEventListener("touchstart",clickEvent);element.addEventListener("click",clickEvent)}}function replyLinks(context){let selectorClass=config.commentReplyClass;let allReplyLinks;if(!context||!context.childNodes){context=document}if(document.getElementsByClassName){allReplyLinks=context.getElementsByClassName(selectorClass)}else{allReplyLinks=context.querySelectorAll("."+selectorClass)}return allReplyLinks}function onInitFunction(){const cookiesAuthorAttr=getDataAttribute(cookiesConsentElement,"author");const cookiesAuthorEmailAttr=getDataAttribute(cookiesConsentElement,"authoremail");if(!cookiesAuthorAttr||!cookiesAuthorEmailAttr){console.error("Unknown author or author email");return}function getCookie(cname){let name=cname+"=";let decodedCookie=decodeURIComponent(document.cookie);let ca=decodedCookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return""}const cookiesAuthor=getCookie(cookiesAuthorAttr);const cookiesAuthorEmail=getCookie(cookiesAuthorEmailAttr);if(!cookiesAuthor||!cookiesAuthorEmail){return}cookiesConsentElement.style.display="none";cookiesConsentElement.nextElementSibling.innerHTML="You are commenting as "+"<strong>"+cookiesAuthor+"</strong>";const commentFormAuthorFields=getElementById(config.commentFormAuthorFieldsId);commentFormAuthorFields.style.display="none";const authorField=getElementById(config.commentFormAuthorFieldId);const emailField=getElementById(config.commentFormEmailFieldId);authorField.value=cookiesAuthor;emailField.value=cookiesAuthorEmail;authorField.removeAttribute("required");emailField.removeAttribute("required")}function cancelEvent(event){event.preventDefault();let temporaryFormId=config.temporaryFormId;let temporaryElement=getElementById(temporaryFormId);commentFieldElement.value="";if(!temporaryElement||!respondElement){return}getElementById(config.parentIdFieldId).value="0";temporaryElement.parentNode.replaceChild(respondElement,temporaryElement)}function clickEvent(event){let replyLink=this,belowElementId=getDataAttribute(replyLink,"belowelement"),parentId=getDataAttribute(replyLink,"parentid"),respondId=getDataAttribute(replyLink,"respondelement"),postId=getDataAttribute(replyLink,"postid"),replyTo=getDataAttribute(replyLink,"replyto"),follow;if(!belowElementId||!parentId||!respondId||!postId){return}follow=window.addComment.moveForm(belowElementId,parentId,respondId,postId,replyTo);if(false===follow){event.preventDefault()}}function getDataAttribute(element,attribute){if(supportsDataset){return element.dataset[attribute]}else{return element.getAttribute("data-"+attribute)}}function getElementById(elementId){return document.getElementById(elementId)}function moveForm(addBelowId,parentId,respondId,postId,replyTo){let addBelowElement=getElementById(addBelowId);respondElement=getElementById(respondId);let parentIdField=getElementById(config.parentIdFieldId);let postIdField=getElementById(config.postIdFieldId);let element,cssHidden,style;if(!addBelowElement||!respondElement||!parentIdField){return}addPlaceHolder(respondElement);if(postId&&postIdField){postIdField.value=postId}parentIdField.value=parentId;commentFieldElement.value=`@${replyTo} `;addBelowElement.parentNode.insertBefore(respondElement,addBelowElement.nextSibling);cancelElement.onclick=function(){return false};try{for(let i=0;i<commentFormElement.elements.length;i++){element=commentFormElement.elements[i];cssHidden=false;if("getComputedStyle"in window){style=window.getComputedStyle(element)}else if(document.documentElement.currentStyle){style=element.currentStyle}if(element.offsetWidth<=0&&element.offsetHeight<=0||style.visibility==="hidden"){cssHidden=true}if("hidden"===element.type||element.disabled||cssHidden){continue}element.focus();break}}catch(e){}return false}function addPlaceHolder(respondElement){let temporaryFormId=config.temporaryFormId;let temporaryElement=getElementById(temporaryFormId);let initialHeadingText="";if(temporaryElement){return}temporaryElement=document.createElement("div");temporaryElement.id=temporaryFormId;temporaryElement.style.display="none";temporaryElement.textContent=initialHeadingText;respondElement.parentNode.insertBefore(temporaryElement,respondElement)}return{init:init,moveForm:moveForm}}(window);